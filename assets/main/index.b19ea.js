System.register("chunks:///_virtual/Drawing.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Grid.ts","./ShapeValidator.ts","./GameCamera.ts","./UI.ts"],(function(t){var i,e,n,r,o,s,a,h,c,l,u,p,g,f,m,P,d,v,T,w,y,D,b;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.createForOfIteratorHelperLoose,r=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){s=t.cclegacy,a=t._decorator,h=t.Camera,c=t.Graphics,l=t.Node,u=t.Prefab,p=t.UITransform,g=t.sys,f=t.input,m=t.Input,P=t.instantiate,d=t.Vec2,v=t.Vec3,T=t.Component},function(t){w=t.Grid},function(t){y=t.ShapeValidator},function(t){D=t.GameCamera},function(t){b=t.UI}],execute:function(){var E,M,C,S,O,U,L,_,A,x,V,G,z,H,N,F,I,R;s._RF.push({},"44ea89fcS5PXpVQMautyHBJ","Drawing",void 0);var k=a.ccclass,B=a.property;t("Drawing",(E=k("Drawing"),M=B(h),C=B(w),S=B(c),O=B(b),U=B(l),L=B(u),_=B(u),E((V=i((x=function(t){function i(){for(var i,e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return i=t.call.apply(t,[this].concat(n))||this,r(i,"camera",V,o(i)),r(i,"grid",G,o(i)),r(i,"committedLinesGraphics",z,o(i)),r(i,"ui",H,o(i)),r(i,"particlesParent",N,o(i)),r(i,"particlePrefab",F,o(i)),r(i,"commitedParticlePrefab",I,o(i)),r(i,"snapDistance",R,o(i)),i.graphics=null,i.uiTransform=null,i.gameCamera=null,i.points=[],i.isDrawing=!1,i.currentPosition=null,i.dragParticle=null,i.committedPaths=[],i}e(i,t);var s=i.prototype;return s.start=function(){this.graphics=this.getComponent(c),this.uiTransform=this.getComponent(p),this.gameCamera=this.camera.getComponent(D),g.isMobile?(f.on(m.EventType.TOUCH_START,this.onTouchStart,this),f.on(m.EventType.TOUCH_MOVE,this.onTouchMove,this),f.on(m.EventType.TOUCH_END,this.onTouchEnd,this),f.on(m.EventType.TOUCH_CANCEL,this.onTouchEnd,this)):(f.on(m.EventType.MOUSE_DOWN,this.onMouseDown,this),f.on(m.EventType.MOUSE_MOVE,this.onMouseMove,this),f.on(m.EventType.MOUSE_UP,this.onMouseUp,this))},s.onMouseDown=function(t){0===t.getButton()&&this.startDrawingAtScreenPos(t.getLocation())},s.onMouseMove=function(t){this.isDrawing&&this.updateDrawing(t.getLocation())},s.onMouseUp=function(t){0===t.getButton()&&this.finishDrawing()},s.onTouchStart=function(t){t.getAllTouches().length>=2||(this.gameCamera.isPinching?this.cancelDrawing():this.startDrawingAtScreenPos(t.getLocation()))},s.onTouchMove=function(t){this.isDrawing&&(this.gameCamera.isPinching?this.cancelDrawing():this.updateDrawing(t.getLocation()))},s.onTouchEnd=function(t){this.finishDrawing()},s.getLocalPosFromScreen=function(t){var i=this.camera.screenToWorld(t.toVec3());return this.uiTransform.convertToNodeSpaceAR(i).toVec2()},s.startDrawingAtScreenPos=function(t){var i=this.getLocalPosFromScreen(t),e=this.grid.getNearestPoint(i);e.distance<=this.snapDistance&&(this.points=[e.position]),this.isDrawing=!0,this.currentPosition=i,this.drawAll(),this.createDragParticle()},s.updateDrawing=function(t){var i=this.getLocalPosFromScreen(t),e=this.grid.getNearestPoint(i);e.distance<=this.snapDistance?(0!==this.points.length&&this.points[this.points.length-1].equals(e.position)||this.points.push(e.position),this.currentPosition=e.position):this.currentPosition=i,this.drawAll(),this.updateDragParticle()},s.finishDrawing=function(){if(this.isDrawing&&this.currentPosition){if(this.graphics.clear(),this.deleteDragParticle(),this.points.length>1){var t=this.getShape();y.validateShape(t)&&(this.grid.claimAllGoalPoints(t),this.committedPaths.push(this.points),this.ui.updateShapeLabel(this.committedPaths.length),this.drawCommittedPaths(),this.spawnParticlesOnPath(this.points))}this.isDrawing=!1,this.currentPosition=null,this.points=[]}},s.cancelDrawing=function(){this.graphics.clear(),this.deleteDragParticle(),this.isDrawing=!1,this.currentPosition=null,this.points=[]},s.drawAll=function(){if(this.graphics.clear(),this.points.length>1){this.graphics.moveTo(this.points[0].x,this.points[0].y);for(var t=1;t<this.points.length;t++)this.graphics.lineTo(this.points[t].x,this.points[t].y);this.graphics.stroke()}if(this.isDrawing&&this.currentPosition&&this.points.length>0){var i=this.points[this.points.length-1];this.graphics.moveTo(i.x,i.y),this.graphics.lineTo(this.currentPosition.x,this.currentPosition.y),this.graphics.stroke()}var e=1.18*this.graphics.lineWidth;this.currentPosition&&(this.graphics.circle(this.currentPosition.x,this.currentPosition.y,e),this.graphics.fill())},s.createDragParticle=function(){var t=P(this.particlePrefab);this.particlesParent.addChild(t),t.setPosition(this.currentPosition.toVec3()),this.dragParticle=t},s.updateDragParticle=function(){this.dragParticle.setPosition(this.currentPosition.toVec3())},s.deleteDragParticle=function(){this.dragParticle.destroy(),this.dragParticle=null},s.spawnParticlesOnPath=function(t){for(var i=0;i<t.length-1;i++){var e=t[i],n=t[i+1],r=new d(n.x-e.x,n.y-e.y),o=r.length();if(0!==o)for(var s=r.normalize(),a=0;a<=o;){var h=new d(e.x+s.x*a,e.y+s.y*a),c=P(this.commitedParticlePrefab);this.particlesParent.addChild(c),c.setPosition(new v(h.x,h.y,0)),a+=30}}},s.getShape=function(){for(var t,i=[],e=n(this.points);!(t=e()).done;){var r=t.value,o=this.grid.getPointAt(r);o&&i.push({row:o.row,col:o.col})}return i},s.drawCommittedPaths=function(){this.committedLinesGraphics.clear();for(var t,i=n(this.committedPaths);!(t=i()).done;){var e=t.value;if(!(e.length<2)){this.committedLinesGraphics.moveTo(e[0].x,e[0].y);for(var r=1;r<e.length;r++)this.committedLinesGraphics.lineTo(e[r].x,e[r].y);this.committedLinesGraphics.stroke()}}},s.onDestroy=function(){f.off(m.EventType.MOUSE_DOWN,this.onMouseDown,this),f.off(m.EventType.MOUSE_MOVE,this.onMouseMove,this),f.off(m.EventType.MOUSE_UP,this.onMouseUp,this),f.off(m.EventType.TOUCH_START,this.onTouchStart,this),f.off(m.EventType.TOUCH_MOVE,this.onTouchMove,this),f.off(m.EventType.TOUCH_END,this.onTouchEnd,this),f.off(m.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},i}(T)).prototype,"camera",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=i(x.prototype,"grid",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=i(x.prototype,"committedLinesGraphics",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=i(x.prototype,"ui",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=i(x.prototype,"particlesParent",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=i(x.prototype,"particlePrefab",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=i(x.prototype,"commitedParticlePrefab",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=i(x.prototype,"snapDistance",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),A=x))||A));s._RF.pop()}}}));

System.register("chunks:///_virtual/GameCamera.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,o,e,n,s,h,a,r,c,u,l,p,m,f;return{setters:[function(t){i=t.applyDecoratedDescriptor,o=t.inheritsLoose,e=t.createClass,n=t.initializerDefineProperty,s=t.assertThisInitialized},function(t){h=t.cclegacy,a=t._decorator,r=t.Camera,c=t.sys,u=t.input,l=t.Input,p=t.Vec3,m=t.Vec2,f=t.Component}],execute:function(){var g,T,M,y,v;h._RF.push({},"0bf723SNp9FU4839l0H/bvg","GameCamera",void 0);var E=a.ccclass,S=a.property;t("GameCamera",E("GameCamera")((M=i((T=function(t){function i(){for(var i,o=arguments.length,e=new Array(o),h=0;h<o;h++)e[h]=arguments[h];return(i=t.call.apply(t,[this].concat(e))||this).camera=null,n(i,"minZoom",M,s(i)),n(i,"maxZoom",y,s(i)),n(i,"zoomSpeed",v,s(i)),i.initialZoom=0,i.isDragging=!1,i.lastMousePos=new p,i.pinchStartDist=0,i.pinchStartOrtho=0,i.isPinching=!1,i.lastPinchMidScreen=new m,i}o(i,t);var h=i.prototype;return h.start=function(){this.camera=this.getComponent(r),this.initialZoom=this.camera.orthoHeight,c.isMobile?(u.on(l.EventType.TOUCH_START,this.onTouchStart,this),u.on(l.EventType.TOUCH_MOVE,this.onTouchMove,this),u.on(l.EventType.TOUCH_END,this.onTouchEnd,this),u.on(l.EventType.TOUCH_CANCEL,this.onTouchEnd,this)):(u.on(l.EventType.MOUSE_WHEEL,this.onMouseWheel,this),u.on(l.EventType.MOUSE_DOWN,this.onMouseDown,this),u.on(l.EventType.MOUSE_MOVE,this.onMouseMove,this),u.on(l.EventType.MOUSE_UP,this.onMouseUp,this))},h.clampZoom=function(){this.camera.orthoHeight=Math.max(this.minZoom,Math.min(this.camera.orthoHeight,this.maxZoom))},h.onMouseWheel=function(t){var i=t.getScrollY();this.camera.orthoHeight-=i*this.zoomSpeed,this.clampZoom()},h.onMouseDown=function(t){if(1===t.getButton()){this.isDragging=!0;var i=t.getLocation();this.lastMousePos.set(i.x,i.y,0)}},h.onMouseUp=function(t){1===t.getButton()&&(this.isDragging=!1)},h.onMouseMove=function(t){if(this.isDragging){var i=t.getLocation(),o=i.x-this.lastMousePos.x,e=i.y-this.lastMousePos.y;this.lastMousePos.set(i.x,i.y,0);var n=new p(-o,-e,0);n.multiplyScalar(this.zoomFactor),this.camera.node.position=this.camera.node.position.add(n)}},h.getTwoTouchesPositions=function(t){var i=t.getAllTouches();return i.length<2?[]:[i[0].getLocation(),i[1].getLocation()]},h.distance=function(t,i){var o=t.x-i.x,e=t.y-i.y;return Math.sqrt(o*o+e*e)},h.onTouchStart=function(t){if(2===t.getAllTouches().length){var i=this.getTwoTouchesPositions(t),o=i[0],e=i[1];this.pinchStartDist=this.distance(o,e),this.pinchStartOrtho=this.camera.orthoHeight;var n=.5*(o.x+e.x),s=.5*(o.y+e.y);this.lastPinchMidScreen.set(n,s),this.isPinching=!0}},h.onTouchMove=function(t){if(this.isPinching){var i=this.getTwoTouchesPositions(t);if(!(i.length<2)){var o=this.distance(i[0],i[1]);if(!(this.pinchStartDist<=0)){var e=o/this.pinchStartDist;this.camera.orthoHeight=this.pinchStartOrtho/e,this.clampZoom();var n=.5*(i[0].x+i[1].x),s=.5*(i[0].y+i[1].y),h=n-this.lastPinchMidScreen.x,a=s-this.lastPinchMidScreen.y,r=new p(-h,-a,0);r.multiplyScalar(this.zoomFactor),this.camera.node.position=this.camera.node.position.add(r),this.lastPinchMidScreen.set(n,s)}}}},h.onTouchEnd=function(t){t.getAllTouches().length<2&&(this.isPinching=!1,this.pinchStartDist=0)},h.onDestroy=function(){u.off(l.EventType.MOUSE_WHEEL,this.onMouseWheel,this),u.off(l.EventType.MOUSE_DOWN,this.onMouseDown,this),u.off(l.EventType.MOUSE_MOVE,this.onMouseMove,this),u.off(l.EventType.MOUSE_UP,this.onMouseUp,this),u.off(l.EventType.TOUCH_START,this.onTouchStart,this),u.off(l.EventType.TOUCH_MOVE,this.onTouchMove,this),u.off(l.EventType.TOUCH_END,this.onTouchEnd,this),u.off(l.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},e(i,[{key:"zoomFactor",get:function(){return this.camera.orthoHeight/this.initialZoom}}]),i}(f)).prototype,"minZoom",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 300}}),y=i(T.prototype,"maxZoom",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 800}}),v=i(T.prototype,"zoomSpeed",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.05}}),g=T))||g);h._RF.pop()}}}));

System.register("chunks:///_virtual/Grid.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ShapeValidator.ts","./UI.ts"],(function(t){var i,e,n,r,o,a,l,s,c,u,h,f,p,d,b;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.createForOfIteratorHelperLoose,r=t.createClass,o=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){l=t.cclegacy,s=t._decorator,c=t.JsonAsset,u=t.Graphics,h=t.Color,f=t.Vec2,p=t.Component},function(t){d=t.ShapeValidator},function(t){b=t.UI}],execute:function(){var g,v,P,w,G,m,y,L,C,D,z,R,S,A;l._RF.push({},"65cb9BXI0hGHJsjt1Eapu1B","Grid",void 0);var I=s.ccclass,T=s.property;t("Grid",(g=I("Grid"),v=T(c),P=T(b),g((m=i((G=function(t){function i(){for(var i,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return i=t.call.apply(t,[this].concat(n))||this,o(i,"cellDistance",m,a(i)),o(i,"pointColor",y,a(i)),o(i,"pointRadius",L,a(i)),o(i,"interactablePointColor",C,a(i)),o(i,"interactablePointRadius",D,a(i)),o(i,"goalPointColor",z,a(i)),o(i,"goalPointRadius",R,a(i)),o(i,"levelDataAsset",S,a(i)),o(i,"ui",A,a(i)),i.currentLevel=null,i.gridPoints=[],i.interactablePoints=[],i.graphics=null,i.claimedGoalPoints=new Set,i}e(i,t);var l=i.prototype;return l.start=function(){this.graphics=this.getComponent(u),this.loadLevel(1)},l.loadLevel=function(t){this.currentLevel=this.levelData.levels.find((function(i){return i.id===t})),this.ui.threeStarsThreshold=this.currentLevel.threeStarsThreshold,this.ui.twoStarsThreshold=this.currentLevel.twoStarsThreshold,this.generateGrid(),this.drawGrid()},l.drawGrid=function(){this.graphics.clear();for(var t,i=n(this.gridPoints);!(t=i()).done;)for(var e,r=t.value,o=n(r);!(e=o()).done;){var a=e.value;this.drawPoint(a)}this.ui.updateGoalLabel(this.claimedGoalPoints.size,this.allGoalPoints.length)},l.drawPoint=function(t){var i=this.pointColor,e=this.pointRadius;if(t.isGoal){var n=t.row+","+t.col;this.claimedGoalPoints.has(n)?(i=new h(0,255,0,255),e=this.goalPointRadius+2):(i=this.goalPointColor,e=this.goalPointRadius)}else t.isInteractable&&(i=this.interactablePointColor,e=this.interactablePointRadius);this.graphics.fillColor=i,this.graphics.circle(t.position.x,t.position.y,e),this.graphics.fill()},l.generateGrid=function(){var t=this;this.gridPoints=[],this.interactablePoints=[];for(var i=.5*((this.currentLevel.cols-1)*this.cellDistance),e=.5*((this.currentLevel.rows-1)*this.cellDistance),n=function(i,e){return t.currentLevel.interactablePoints.some((function(t){return t.row===i&&t.col===e}))},r=function(i,e){return t.currentLevel.goalPoints.some((function(t){return t.row===i&&t.col===e}))},o=0;o<this.currentLevel.rows;o++){this.gridPoints[o]=[];for(var a=0;a<this.currentLevel.cols;a++){var l=a*this.cellDistance-i,s=-o*this.cellDistance+e,c=new f(l,s),u=n(o,a),h={position:c,row:o,col:a,isInteractable:u,isGoal:r(o,a)};this.gridPoints[o][a]=h,u&&this.interactablePoints.push(h)}}},l.getNearestPoint=function(t){if(0===this.interactablePoints.length)return{position:null,distance:1/0};for(var i,e=null,r=1/0,o=n(this.interactablePoints);!(i=o()).done;){var a=i.value,l=f.distance(t,a.position);l<r&&(r=l,e=a)}return{position:e.position,distance:r}},l.getPointAt=function(t){if(0===this.interactablePoints.length)return null;for(var i,e=n(this.interactablePoints);!(i=e()).done;){var r=i.value;if(r.position.equals(t))return r}},l.getAllinteractablePoints=function(){return this.interactablePoints},l.claimAllGoalPoints=function(t){for(var i=0;i<t.length-1;i++)for(var e,r=t[i],o=t[i+1],a=this.getAllGoalPointsOnSegment(r,o),l=n(a);!(e=l()).done;){var s=e.value;this.claimedGoalPoints.add(s.row+","+s.col)}this.drawGrid()},l.getAllGoalPointsOnSegment=function(t,i){for(var e,r=[],o=n(this.allGoalPoints);!(e=o()).done;){var a=e.value,l={row:a.row,col:a.col};d.isPointOnSegment(t,i,l)&&r.push(l)}return r},r(i,[{key:"allGoalPoints",get:function(){return this.interactablePoints.filter((function(t){return t.isGoal}))}},{key:"levelData",get:function(){return this.levelDataAsset.json}}]),i}(p)).prototype,"cellDistance",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),y=i(G.prototype,"pointColor",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new h(255,255,255,128)}}),L=i(G.prototype,"pointRadius",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),C=i(G.prototype,"interactablePointColor",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new h(0,255,0,128)}}),D=i(G.prototype,"interactablePointRadius",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 6}}),z=i(G.prototype,"goalPointColor",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new h(255,255,0,255)}}),R=i(G.prototype,"goalPointRadius",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 8}}),S=i(G.prototype,"levelDataAsset",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=i(G.prototype,"ui",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=G))||w));l._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./Drawing.ts","./GameCamera.ts","./Grid.ts","./ShapeValidator.ts","./UI.ts"],(function(){return{setters:[null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/ShapeValidator.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var r,n;return{setters:[function(e){r=e.createForOfIteratorHelperLoose},function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"8d42b5XSkJFh7ID29jQzEzZ","ShapeValidator",void 0);var t=[{isClosed:!0,name:"Triangle",shape:[{row:0,col:0},{row:10,col:0},{row:10,col:10},{row:0,col:0}]},{isClosed:!0,name:"Rhombus",shape:[{row:0,col:7},{row:7,col:0},{row:14,col:7},{row:7,col:14},{row:0,col:7}]},{isClosed:!1,name:"M-Shape",shape:[{row:29,col:0},{row:0,col:0},{row:10,col:10},{row:0,col:20},{row:29,col:20}]}];e("ShapeValidator",function(){function e(){}return e.validateShape=function(e){var r=this,n=this.normalizeShape(e);return t.find((function(e){return!(e.shape.length>n.length)&&r.hasValidShapeMatch(n,e)}))},e.normalizeShape=function(e){var r=Math.min.apply(Math,e.map((function(e){return e.row}))),n=Math.min.apply(Math,e.map((function(e){return e.col})));return e.map((function(e){return{row:e.row-r,col:e.col-n}}))},e.hasValidShapeMatch=function(e,r){if(r.isClosed){if(e[0].row!==e[e.length-1].row||e[0].col!==e[e.length-1].col)return!1;for(var n=0,t=[1,-1];n<t.length;n++)for(var o=1===t[n]?e:[].concat(e).reverse(),a=0;a<o.length-1;a++){var i=this.rotateShape(o,a);if(this.hasTemplateVerticesInOrder(i,r.shape)&&this.hasAllPointsOnEdges(i,r.shape)&&this.hasAllConsecutiveEdgesValid(i,r.shape))return!0}return!1}var l=this.hasTemplateVerticesInOrder(e,r.shape),s=this.hasTemplateVerticesInOrder(e,[].concat(r.shape).reverse());return(l||s)&&this.hasAllPointsOnEdges(e,r.shape)&&this.hasAllConsecutiveEdgesValid(e,r.shape)},e.hasTemplateVerticesInOrder=function(e,r){for(var n=0,t=0;t<e.length;t++)if(e[t].row===r[n].row&&e[t].col===r[n].col&&++n===r.length)return!0;return!1},e.hasAllPointsOnEdges=function(e,n){if(e.length===n.length)return!0;for(var t,o=function(e){for(var r=[],n=0;n<e.length-1;n++)r.push([e[n],e[n+1]]);return r},a=r(e);!(t=a()).done;){for(var i,l=t.value,s=!1,h=o(n),c=r(h);!(i=c()).done;){var u=i.value,p=u[0],f=u[1];if(this.isPointOnSegment(p,f,l)){s=!0;break}}if(!s)return!1}return!0},e.hasAllConsecutiveEdgesValid=function(e,n){for(var t,o=function(e){for(var r=[],n=0;n<e.length-1;n++)r.push([e[n],e[n+1]]);return r},a=o(e),i=o(n),l=r(a);!(t=l()).done;){for(var s,h=t.value,c=h[0],u=h[1],p=!1,f=r(i);!(s=f()).done;){var v=s.value,d=v[0],g=v[1];if(this.isPointOnSegment(d,g,c)&&this.isPointOnSegment(d,g,u)){p=!0;break}}if(!p)return!1}return!0},e.isPointOnSegment=function(e,r,n){var t=n.row-e.row,o=n.col-e.col,a=r.row-e.row,i=r.col-e.col;if(t*i!=o*a)return!1;var l=t*a+o*i;return!(l<0)&&l<=a*a+i*i},e.rotateShape=function(e,r){var n=e.slice(0,-1),t=[].concat(n.slice(r),n.slice(0,r));return t.push(t[0]),t},e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/UI.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,a,n,r,i,l,o,s,u,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){i=e.cclegacy,l=e._decorator,o=e.Label,s=e.Widget,u=e.director,h=e.Component}],execute:function(){var p,c,b,f,L,d,g,S,w,C,y,v,P;i._RF.push({},"268aeZsOwhBoa43PFCkaaXd","UI",void 0);var m=l.ccclass,z=l.property;e("UI",(p=m("UI"),c=z(o),b=z(o),f=z(o),L=z(s),d=z(o),p((w=t((S=function(e){function t(){for(var t,a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return t=e.call.apply(e,[this].concat(i))||this,n(t,"goalCountLabel",w,r(t)),n(t,"shapeCountLabel",C,r(t)),n(t,"starCountLabel",y,r(t)),n(t,"winPanel",v,r(t)),n(t,"winPanelStarCountLabel",P,r(t)),t.threeStarsThreshold=2,t.twoStarsThreshold=3,t}a(t,e);var i=t.prototype;return i.start=function(){this.updateShapeLabel(0),this.updateStarLabel(3),this.winPanel.node.active=!1},i.updateShapeLabel=function(e){var t=0;e<=this.threeStarsThreshold?(t=3,this.shapeCountLabel.string="Shapes: "+e+" / "+this.threeStarsThreshold):e<=this.twoStarsThreshold?(t=2,this.shapeCountLabel.string="Shapes: "+e+" / "+this.twoStarsThreshold):(t=1,this.shapeCountLabel.string="Shapes: "+e),this.updateStarLabel(t)},i.updateGoalLabel=function(e,t){this.goalCountLabel.string="Goals: "+e+" / "+t,e===t&&(this.winPanel.node.active=!0)},i.updateStarLabel=function(e){this.starCountLabel.string="★".repeat(e)+"☆".repeat(3-e),this.winPanelStarCountLabel.string=this.starCountLabel.string},i.reset=function(){var e=u.getScene().name;u.loadScene(e,(function(){}))},t}(h)).prototype,"goalCountLabel",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(S.prototype,"shapeCountLabel",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=t(S.prototype,"starCountLabel",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(S.prototype,"winPanel",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(S.prototype,"winPanelStarCountLabel",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=S))||g));i._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});